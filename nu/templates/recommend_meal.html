<!DOCTYPE html> 
<html>
<head>
    <title>AI Meal Recommendation</title>
</head>
<body>
    <h2>AI Meal Recommendation üç±</h2>

    <form method="POST" action="{% url 'recommend_meal' %}">
        {% csrf_token %}

        <label>Select Meal Type:</label><br>
        <select name="meal_type">
            <option value="Breakfast">Breakfast</option>
            <option value="Morning_Snack">Morning Snack</option>
            <option value="Lunch">Lunch</option>
            <option value="Evening_Snack">Evening Snack</option>
            <option value="Dinner">Dinner</option>
        </select><br><br>

        <label>Calories to Fill:</label><br>
        <input type="text" name="remaining_calories" placeholder="e.g. 600"><br><br>

        <label>Preferences (e.g. vegetarian, high-protein):</label><br>
        <input type="text" name="preference" placeholder="e.g. vegetarian, high-protein"><br><br>

        <label>Foods to Avoid:</label><br>
        <input type="text" name="exclusions" placeholder="e.g. dairy, peanuts"><br><br>

        <button type="submit">Get Meal Plan</button>
    </form>

    {% if recommendation_list %}
        <h3>AI Recommended Meals üç±</h3>
        {% for meal in recommendation_list %}
            <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
                <pre>{{ meal }}</pre>

                <form method="POST" action="{% url 'log_meal' %}">
                    {% csrf_token %}
                    <input type="hidden" name="food" value="AI Recommended Meal üç±">
                    <input type="hidden" name="quantity" value="{{ meal|escape }}">
                    
                    <label>Log this meal under:</label><br>
                    <select name="meal_type">
                        <option value="Breakfast">Breakfast</option>
                        <option value="Morning_Snack">Morning Snack</option>
                        <option value="Lunch">Lunch</option>
                        <option value="Evening_Snack">Evening Snack</option>
                        <option value="Dinner">Dinner</option>
                    </select><br><br>

                    <button type="submit">Add to Meal Log</button>
                </form>
            </div>
        {% endfor %}
    {% endif %}
</body>
</html>
