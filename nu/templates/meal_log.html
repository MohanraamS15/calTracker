<!DOCTYPE html>
<html>
<head>
    <title>Meal Logger</title>
</head>
<body>
    <h2>Log Your Meals üçΩÔ∏è</h2>

    <!-- Manual Entry Form -->
    <form method="POST">
        {% csrf_token %}
        <label>Food Item:</label>
        <input type="text" name="food" placeholder="e.g. 2 Idlis"><br><br>

        <label>Quantity (e.g. 150g):</label>
        <input type="text" name="quantity" placeholder="e.g. 150g"><br><br>

        <label>Meal Type:</label>
        <select name="meal_type">
            <option value="Breakfast">Breakfast</option>
            <option value="Morning_Snack">Morning Snack</option>
            <option value="Lunch">Lunch</option>
            <option value="Evening_Snack">Evening Snack</option>
            <option value="Dinner">Dinner</option>
        </select><br><br>

        <button type="submit">Add to Log</button>
    </form>

    <hr>

    <h3>Logged Meals</h3>
    {% if logged_meals %}
        {% for meal_type, meals in logged_meals.items %}
            <h4>{{ meal_type }}</h4>
            <ul>
            {% for item in meals %}
                <li>
                    {% if item.food == "AI Recommended Meal" %}
                        <strong>{{ item.food }}</strong><br>
                        <pre>{{ item.raw_response }}</pre>
                    {% else %}
                        {{ item.food }} - {{ item.calories }} kcal,
                        {{ item.protein }}g protein,
                        {{ item.fat }}g fat,
                        {{ item.carbs }}g carbs,
                        {{ item.fiber }}g fiber
                    {% endif %}
                </li>
            {% endfor %}
            </ul>
        {% endfor %}
    {% else %}
        <p>No meals logged yet.</p>
    {% endif %}

    <hr>
    <h3>Total Daily Intake:</h3>
    <ul>
        <li>Calories: {{ totals.calories }} kcal</li>
        <li>Protein: {{ totals.protein }} g</li>
        <li>Fat: {{ totals.fat }} g</li>
        <li>Carbs: {{ totals.carbs }} g</li>
        <li>Fiber: {{ totals.fiber }} g</li>
    </ul>
</body>
</html>
